version: classificator-v1
krtVersion: v2
description: Version for testing.
entrypoint:
  proto: public_input.proto
  image: konstellation/kre-entrypoint:latest
config:
  variables:
workflows:
  - name: classificator
    entrypoint: Classificator
    exitpoint: exitpoint
    nodes:
      - name: etl
        image: konstellation/kre-py:latest
        src: src/etl/main.py
        # gpu is an optional value, defaults to false.
        gpu: false
        subscriptions:
          - "entrypoint"

      - name: email_classificator
        image: konstellation/kre-py:latest
        src: src/email_classificator/main.py
        # gpu is an optional value, defaults to false.
        gpu: false
        subscriptions:
          - "etl"

      - name: email_filter
        image: konstellation/kre-go:latest
        src: bin/email_filter
        # gpu is an optional value, defaults to false.
        gpu: false
        subscriptions:
          - "email_classificator.repairs"

      - name: stats_storer
        image: konstellation/kre-go:latest
        src: bin/stats_storer
        # gpu is an optional value, defaults to false.
        gpu: false
        subscriptions:
          - "email_classificator"

      - name: exitpoint
        image: konstellation/kre-go:latest
        src: bin/exitpoint
        # gpu is an optional value, defaults to false.
        gpu: false
        subscriptions:
          - "etl"